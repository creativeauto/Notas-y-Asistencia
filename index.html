<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora de Notas</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Calculadora de Ramo</h1>

<div class="grid">

  <!-- Ramo 1 -->
  <div class="card">
    <input class="ramo-titulo" value="Ramo 1">
    <table>
      <thead>
        <tr><th>Eval</th><th>%</th><th>Nota</th><th></th></tr>
      </thead>
      <tbody class="evaluaciones">
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 1"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 2"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 3"></td><td><input type="number" value="30" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 4"></td><td><input type="number" value="20" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
      </tbody>
    </table>
    <button onclick="agregarEvaluacion(this)">+ A帽adir evaluaci贸n</button>
    <button onclick="calcular(this)">Calcular</button>
    <div class="final-box">0.0</div>
  </div>

  <!-- Ramo 2 -->
  <div class="card">
    <input class="ramo-titulo" value="Ramo 2">
    <table>
      <thead>
        <tr><th>Eval</th><th>%</th><th>Nota</th><th></th></tr>
      </thead>
      <tbody class="evaluaciones">
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 1"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 2"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 3"></td><td><input type="number" value="30" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 4"></td><td><input type="number" value="20" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
      </tbody>
    </table>
    <button onclick="agregarEvaluacion(this)">+ A帽adir evaluaci贸n</button>
    <button onclick="calcular(this)">Calcular</button>
    <div class="final-box">0.0</div>
  </div>

  <!-- Ramo 3 -->
  <div class="card">
    <input class="ramo-titulo" value="Ramo 3">
    <table>
      <thead>
        <tr><th>Eval</th><th>%</th><th>Nota</th><th></th></tr>
      </thead>
      <tbody class="evaluaciones">
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 1"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 2"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 3"></td><td><input type="number" value="30" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 4"></td><td><input type="number" value="20" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
      </tbody>
    </table>
    <button onclick="agregarEvaluacion(this)">+ A帽adir evaluaci贸n</button>
    <button onclick="calcular(this)">Calcular</button>
    <div class="final-box">0.0</div>
  </div>

  <!-- Ramo 4 -->
  <div class="card">
    <input class="ramo-titulo" value="Ramo 4">
    <table>
      <thead>
        <tr><th>Eval</th><th>%</th><th>Nota</th><th></th></tr>
      </thead>
      <tbody class="evaluaciones">
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 1"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 2"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 3"></td><td><input type="number" value="30" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 4"></td><td><input type="number" value="20" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
      </tbody>
    </table>
    <button onclick="agregarEvaluacion(this)">+ A帽adir evaluaci贸n</button>
    <button onclick="calcular(this)">Calcular</button>
    <div class="final-box">0.0</div>
  </div>

  <!-- Ramo 5 -->
  <div class="card">
    <input class="ramo-titulo" value="Ramo 5">
    <table>
      <thead>
        <tr><th>Eval</th><th>%</th><th>Nota</th><th></th></tr>
      </thead>
      <tbody class="evaluaciones">
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 1"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 2"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 3"></td><td><input type="number" value="30" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 4"></td><td><input type="number" value="20" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
      </tbody>
    </table>
    <button onclick="agregarEvaluacion(this)">+ A帽adir evaluaci贸n</button>
    <button onclick="calcular(this)">Calcular</button>
    <div class="final-box">0.0</div>
  </div>

  <!-- Ramo 6 -->
  <div class="card">
    <input class="ramo-titulo" value="Ramo 6">
    <table>
      <thead>
        <tr><th>Eval</th><th>%</th><th>Nota</th><th></th></tr>
      </thead>
      <tbody class="evaluaciones">
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 1"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 2"></td><td><input type="number" value="25" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 3"></td><td><input type="number" value="30" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
        <tr><td><input class="eval-nombre" value="Evaluaci贸n 4"></td><td><input type="number" value="20" class="porcentaje"></td><td><input type="number" class="nota"></td><td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td></tr>
      </tbody>
    </table>
    <button onclick="agregarEvaluacion(this)">+ A帽adir evaluaci贸n</button>
    <button onclick="calcular(this)">Calcular</button>
    <div class="final-box">0.0</div>
  </div>

</div>

<script>
function calcular(btn){
  const card = btn.closest(".card");
  const porcentajes = card.querySelectorAll(".porcentaje");
  const notas = card.querySelectorAll(".nota");
  const finalBox = card.querySelector(".final-box");

  let total = 0;

  for(let i=0;i<notas.length;i++){
    let p = parseFloat(porcentajes[i].value)/100;
    let n = parseFloat(notas[i].value);
    if(!isNaN(n)){
      total += n*p;
    }
  }

  finalBox.textContent = total.toFixed(1);
  finalBox.style.color = total >= 4 ? "#0a8f3c" : "#c40000";
}

function agregarEvaluacion(btn){
  const card = btn.closest(".card");
  const tbody = card.querySelector(".evaluaciones");

  const numero = tbody.querySelectorAll("tr").length + 1;

  const nuevaFila = document.createElement("tr");
  nuevaFila.innerHTML = `
    <td><input class="eval-nombre" value="Evaluaci贸n ${numero}"></td>
    <td><input type="number" class="porcentaje"></td>
    <td><input type="number" class="nota"></td>
    <td><button class="delete-btn" onclick="eliminarEvaluacion(this)"></button></td>
  `;

  tbody.appendChild(nuevaFila);
}

function eliminarEvaluacion(btn){
  const fila = btn.closest("tr");
  const tbody = fila.parentElement;

  fila.remove();
  renumerarEvaluaciones(tbody);
}

function renumerarEvaluaciones(tbody){
  const filas = tbody.querySelectorAll("tr");
  filas.forEach((fila, index) => {
    const inputNombre = fila.querySelector(".eval-nombre");
    inputNombre.value = "Evaluaci贸n " + (index + 1);
  });
}
</script>

</body>
</html>
